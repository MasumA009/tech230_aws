# Cloud Watch

Amazon CloudWatch is a monitoring and management service that provides data and actionable insights for AWS. 

CloudWatch monitors different aspects, such as:

1. EC2 Instances: CloudWatch can monitor the performance metrics of your EC2 instances, such as CPU utilization, network traffic, disk I/O, and more

2. Auto Scaling Groups: CloudWatch can track the scaling activities of your Auto Scaling groups and provide information such as: group size, instance launches, terminations, and scaling policies.

3. Alarms: CloudWatch can generate alarms based on defined thresholds for metrics, alerting you when certain conditions are met. 

4. S3: CloudWatch can track the request latency, request throughput, and error rates of your Amazon S3 buckets.

5. Custom Metrics: CloudWatch allows you to publish your own custom metrics, enabling you to monitor specific aspects of your applications or infrastructure that are not covered by default metrics.

6. Lambda Functions: CloudWatch can capture and analyze logs generated by Lambda functions and provide metrics such as the number of invocations, duration, and error rates.


Read more here:

[Read more here at AWS CloudWatch](https://aws.amazon.com/cloudwatch/features/#:~:text=Amazon%20CloudWatch%20is%20a%20monitoring,premises%20applications%20and%20infrastructure%20resources.)



![Alt text](CloudWatch-images/CW-Overview.png)


# CloudWatch on AWS

## Firstly create a new instance

This one will run the sparta pp via the User data.
![Alt text](CloudWatch-images/Screenshot%202023-05-25%20141930.png)

## Monitoring

Navigate to the instance page and scroll down to the monitoring:

![Alt text](CloudWatch-images/Screenshot%202023-05-25%20142106.png)

## turn on detailed monitoring:

![Alt text](CloudWatch-images/Screenshot%202023-05-25%20142206.png)

![Alt text](CloudWatch-images/Screenshot%202023-05-25%20142659.png)

## Add to dashboard

Select `Add to dashboard` and create a new one wit h the following entries:

![Alt text](CloudWatch-images/Screenshot%202023-05-25%20142727.png)

It should result in the dashboard:
![Alt text](CloudWatch-images/Screenshot%202023-05-25%20142608.png)

This provides some interesting statistics. 

# Creating a CPU alarm

##  Navigate to Cloudwatch page

Search for `CloudWatch` in the menu, then Alarams -> All alarms. This can be found in the dropdown side menu:
![Alt text](CloudWatch-images/Screenshot%202023-05-25%20144045.png)

Create new alarm: ![Alt text](CloudWatch-images/Screenshot%202023-05-25%20144120.png)

### select metric
then Select `All metrics`,

Navigate to `EC2` -> `Per-Instance Metrics`:

![Alt text](CloudWatch-images/Screenshot%202023-05-25%20144331.png)

Here we need to find our instance and select what we want to monitor.
Paste in your `instance ID`:
![Alt text](CloudWatch-images/Screenshot%202023-05-25%20144842.png)
As you can see, this is my instance. 

Select `Select metric`.

![Alt text](CloudWatch-images/Screenshot%202023-05-25%20145004.png)

The metric has been selected!

## Configure alarm

Now we can seea pre-view CloudWatch monitoring the CPU Usage via the graph. 

### Progress Check: the page should look like this:

![Alt text](CloudWatch-images/Screenshot%202023-05-25%20145525.png)

### Settings
Under `Statistic` select `Average`:
![Alt text](CloudWatch-images/Screenshot%202023-05-25%20145410.png)

For the sake of this example I used these settings:
Note: this is a percentage, 

Pu it this low for this example, i want it to trigger. Usually it would be a lot higher. 
![Alt text](CloudWatch-images/Screenshot%202023-05-25%20145703.png)


select `Next`.

### Notfication config

I had to create a new `topic`. A topic is essentially  a notification method. 
i created it here:
![Alt text](CloudWatch-images/Screenshot%202023-05-25%20150454.png)

There is so much more cusomisation we can do, such as stopping instances and auto sccaling groups, but for now we move on. select `Next`. 

### add name and description
Can be seen here:
![Alt text](CloudWatch-images/Screenshot%202023-05-25%20150644.png)

Then `Create alarm`:
![Alt text](CloudWatch-images/Screenshot%202023-05-25%20150802.png)

I had to confirm it in my email, which led to this:

![Alt text](CloudWatch-images/Screenshot%202023-05-25%20151041.png)

## Testing alarm:

Instead i will SSH into, and launch some commands, i had it so it changed from 2 to 0.01, this allowed it:

Success:
![Alt text](CloudWatch-images/Screenshot%202023-05-25%20152035.png)

Clearer:

![Alt text](CloudWatch-images/Screenshot%202023-05-25%20152342.png)









